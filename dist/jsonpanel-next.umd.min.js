/*!
 * jsonpanel-next v1.0.0
 * (c) 2019 Tan Zhen Yong
 * Released under the MIT License.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).jsonpanelNext=t()}(this,function(){"use strict";function t(e,t){var r=function(e){return JSON.parse(JSON.stringify(e))}(t);return Object.assign(r,e)}function e(e,t,r){this.key=e,this.val=t,this.valTransformer=r}var r={valType:{configurable:!0},class:{configurable:!0}};e.create=function(e,t,r){return function(e){return"[object Object]"===Object.prototype.toString.call(e)}(t)||Array.isArray(t)?new a(e,t,r):new n(e,t,r)},e.prototype.getKeyMarkup=function(){return'<span class="key">'+this.key+"</span>"},r.valType.get=function(){return typeof this.val},e.prototype.getValInnerMarkup=function(){return JSON.stringify(this.val)},e.prototype.createTagInnerMarkup=function(){return this.getKeyMarkup()+': <span class="val '+this.valType+'">'+this.getValInnerMarkup()+"</span>"},r.class.get=function(){return"pair"},e.prototype.createTag=function(){var e=document.createElement("li");return e.className=this.class,e.innerHTML=this.createTagInnerMarkup(),e},e.prototype.render=function(){this.el=this.createTag()},Object.defineProperties(e.prototype,r);var n=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var r={class:{configurable:!0}};return r.class.get=function(){return e.prototype.class+" simple"},t.prototype.getValInnerMarkup=function(){return this.valTransformer instanceof Function?this.valTransformer(e.prototype.getValInnerMarkup.call(this)):e.prototype.getValInnerMarkup.call(this)},Object.defineProperties(t.prototype,r),t}(e),a=function(r){function e(){r.apply(this,arguments)}r&&(e.__proto__=r),(e.prototype=Object.create(r&&r.prototype)).constructor=e;var t={valType:{configurable:!0},class:{configurable:!0},expanded:{configurable:!0}};return t.valType.get=function(){return Array.isArray(this.val)?"array":"object"},t.class.get=function(){return r.prototype.class+" expandable"},e.prototype.getValInnerMarkup=function(){var e=r.prototype.getValInnerMarkup.call(this).match(/^([{[])(.*)([}\]])$/);return e[1]+'<span class="val-inner">'+e[2]+"</span>"+e[3]},e.prototype.createTagInnerMarkup=function(){return'<a class="expander" href="#">'+r.prototype.createTagInnerMarkup.call(this)+"</a>"},e.prototype.render=function(){var t=this;r.prototype.render.call(this),this.el.querySelector(".expander").addEventListener("click",function(e){return t.onKeyClick(e)})},t.expanded.get=function(){return this.el.classList.contains("expanded")},e.prototype.expand=function(){i.renderToEl(this.el,{data:this.val}),this.el.classList.add("expanded")},e.prototype.collapse=function(){this.el.querySelectorAll(".panel").forEach(function(e){return e.parentNode.removeChild(e)}),this.el.classList.remove("expanded")},e.prototype.onKeyClick=function(e){this.expanded?this.collapse():this.expand(),e.stopPropagation(),e.preventDefault()},Object.defineProperties(e.prototype,t),e}(e),o=e.create,i=function(e){this.options=e},s={selector:{configurable:!0},data:{configurable:!0},valTransformer:{configurable:!0}};s.selector.get=function(){return this.options.selector},s.data.get=function(){return this.options.data},s.valTransformer.get=function(){return this.options.valTransformer},i.prototype.isArray=function(){return Array.isArray(this.data)},i.prototype.createListTag=function(){if(this.isArray()){var e=document.createElement("ol");return e.className="list",e.start=0,e}var t=document.createElement("ul");return t.className="list",t},i.prototype.createListItem=function(e,t){var r=o(e,t,this.valTransformer);return r.render(),r.el},i.prototype.render=function(){var n=this,a=this.createListTag();Object.entries(this.data).forEach(function(e){var t=e[0],r=e[1];a.append(n.createListItem(t,r))});var e=document.createElement("div");return e.className="panel",e.append(a),this.el=e,this},i.renderToEl=function(e,t){var r=new i(t);return r.render(),e.append(r.el),r},Object.defineProperties(i.prototype,s);var c={selector:"#jsonpanel",data:{}};return function(e){return e=t(e,c),i.renderToEl(window.document.querySelector(e.selector),e)}});
//# sourceMappingURL=jsonpanel-next.umd.min.js.map
